# 从设计上优化
---

1. **主键字段取值尽可能小**

> *更小的数据类型使用更少的磁盘空间、内存、cpu缓存*

2. **选择char还是varchar**

> *若字段长度固定，能用char绝不用varchar，但如果内容是可变的，采用varchar比char好，可以节省存储空间、存取更有效率*

3. **设置默认值**

> *where 子句中对字段进行 null 值判断，将导致引擎放弃使用索引而进行全表扫描，所以设置一个默认值总是好的。*

# sql语句优化
---

1. **优化慢查询**

> *sql监控，针对慢查询进行优化，比如使用explain来分析select语句，获取sql执行范围、索引使用情况等*

2. **避免在 WHERE 子句中使用函数，避免where子句字段进行运算**

> *大量调用函数，或者因为字段运算而导致查询最佳化程序无法使用索引，都会严重影响查询性能*

3. **少用select***

> *应该只取需要的数据，减轻服务器和网络的负载*

4. **避免返回大量数据**

> *使用limit限制返回的数据量，不要返回大量不需要的数据*

5. **建立索引**

> *使用索引能够更快的找到符合条件的数据*

# insert优化
---

* 一条SQ语句插入多条数据
> *原因：一是减少SQL语句解析的操作， 只需要解析一次就能进行数据的插入操作，二是SQL语句较短，可以减少网络传输的IO*
* 在事务中进行插入处理
 > *原因：进行一个INSERT操作时，MySQL内部会建立一个事务，在事务内进行真正插入处理。通过使用事务可以减少创建事务的消耗，所有插入都在执行后才进行提交操作*
* 注意事项
1. SQL语句是有长度限制，在进行数据合并在同一SQL中务必不能超过SQL长度限制，通过max_allowed_packet配置可以修改，默认是1M
2. 事务需要控制大小，事务太大可能会影响执行的效率。MySQL有innodb_log_buffer_size配置项，超过这个值会日志会使用磁盘数据，这时，效率会有所下降。所以比较好的做法是，在事务大小达到配置项数据级前进行事务提交

# 大量数据的增删改优化
---

关闭事务的自动提交，控制提交的频率，分次批量提交
